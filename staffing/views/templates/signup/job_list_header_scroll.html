
{# snippets to add the scrolling title and date headers to signup and roster #}
<style>
    #scroll-header-contain{
        width:100%;
        position:fixed;
        top:0;
        margin:0;
    }
    @media (min-width: 993px){
        #scroll-header-contain{
            width:65%;
            margin:0 16.6666%;
        }
        
    #event-name-header, #job-date-header{
        padding:6pt;
        margin-top:0 !important;
        margin-bottom:0 !important;
        font-weight:bold;
        display:none;
    }
    #job-date-header{
        padding:6pt 6pt 6pt 20pt;
    }
    }
</style>

<script>
    var event_id_list = {{ event_name_header_list }};
    var job_date_list = {{ job_date_header_list }}
    var header_text = '';
    var date_header_text = "";
    var last_event_end_id = -1;
    window.onscroll = function(){
        var scrollDist = $(window).scrollTop();
        var show_header = false;
        var show_date_header = false;
        var clear_date = false
        // get the end of event marker that's just below the top of screen
        for(i=event_id_list.length-1; i > -1; i--){
            var event_id = event_id_list[i];
            var got_end_marker = false;
            var tail = document.getElementById("event_end_marker_" + event_id);
            var header = document.getElementById("event-" + event_id);
            if (header != undefined && tail != undefined){
                if (scrollDist >= tail.offsetTop - 120 && scrollDist > head.offsetTop){
                    // the end is near... clear both headers
                    got_end_marker = true;
                    break
                }
            }
        }
        for(i=job_date_list.length-1; i > -1; i--){
            var job_id = job_date_list[i];
            var header = document.getElementById("event-title-" + job_id);
            if (header != undefined){
                if (scrollDist >= header.offsetTop - 120){
                    // if the header text is about to change, hide the date...
                    //if (header_text !=  header.textContent ) { 
                    //    clear_date = true;
                    //    header_text = header.textContent;
                    //    show_header = true;
                    //    break;
                    //}
                    header_text = header.textContent;
                    show_header = true;
                    break;
                }
            }
        }
        for(j=job_date_list.length-1; j > -1; j--){
            var job_id = job_date_list[j];
            date_header = document.getElementById("job-date-" + job_id );
            if (date_header != undefined){
                if (scrollDist >= date_header.offsetTop - 120){
                    date_header_text = date_header.textContent;
                    show_date_header = true;
                    break;
                }
            }
        }
        if (show_header && !got_end_marker){
            $('#event-name-header').html(header_text).show();
            if (show_date_header && !clear_date){
                $('#job-date-header').html(date_header_text).show();
            } else {
                $('#job-date-header').html('').hide();
            }
        } else {
            $('#event-name-header').html('').hide();
            $('#job-date-header').html('').hide();
        }
    }
</script>
<script>
//    var event_id_list = {{ event_name_header_list }};
//    var job_date_list = {{ job_date_header_list }}
//    var header_text = '';
//    var date_header_text = "";
//    window.onscroll = function(){
//        var scrollDist = $(window).scrollTop();
//        for(i=event_id_list.length-1; i > -1; i--){
//            var show_header = false;
//            var show_date_header = false;
//            var clear_date = false
//            var event_id = event_id_list[i];
//            var header = document.getElementById("event-title-" + event_id);
//            if (header != undefined){
//                if (scrollDist >= header.offsetTop - 120){
//                    // if the header text is about to change, hide the date...
//                    if (header_text !=  header.textContent ) { 
//                        clear_date = true;
//                        header_text = header.textContent;
//                        show_header = true;
//                        break;
//                    }
//                    show_header = true;
//                    for(j=job_date_list.length-1; j > -1; j--){
//                        var job_id = job_date_list[j];
//                        date_header = document.getElementById("job-date-" + job_id );
//                        if (date_header != undefined){
//                            if (scrollDist >= date_header.offsetTop - 0){
//                                date_header_text = date_header.textContent;
//                                show_date_header = true;
//                                break;
//                            }
//                        }
//                    }
//                }
//                if (show_header){
//                    $('#event-name-header').html(header_text).show();
//                    if (show_date_header && !clear_date){
//                        $('#job-date-header').html(date_header_text).show();
//                    } else {
//                        $('#job-date-header').html('').hide();
//                    }
//                    break;
//                } else {
//                    $('#event-name-header').html('').hide();
//                    $('#job-date-header').html('').hide();
//                }
//            }
//        }
//    }
</script>

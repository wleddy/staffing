
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Shotglass2 Docs &#8212; Staffing 0.1.0 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Staffing Module" href="staffing.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="shotglass2-docs">
<h1>Shotglass2 Docs<a class="headerlink" href="#shotglass2-docs" title="Permalink to this headline">¶</a></h1>
<p><strong>Shotglass2</strong> is a python package that provides the basic functionality for web sites that are built upon it.</p>
<div class="section" id="shotglass">
<h2>Shotglass<a class="headerlink" href="#shotglass" title="Permalink to this headline">¶</a></h2>
<p>The <strong>shotglass</strong> module provides a lot of basic functionality.</p>
<span class="target" id="module-shotglass2.shotglass"></span><dl class="function">
<dt id="shotglass2.shotglass.get_app_config">
<code class="sig-prename descclassname">shotglass2.shotglass.</code><code class="sig-name descname">get_app_config</code><span class="sig-paren">(</span><em class="sig-param">this_app=None</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.shotglass.get_app_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Depricated</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.shotglass.get_site_config">
<code class="sig-prename descclassname">shotglass2.shotglass.</code><code class="sig-name descname">get_site_config</code><span class="sig-paren">(</span><em class="sig-param">this_app=None</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.shotglass.get_site_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a copy of the current app.config.
This makes it possible for other modules to get access to the config
with the values as updated for the current host.
Import this method rather than importing app</p>
<p>When called from app.py, the app is passed in. When
called from other modules it is not needed.</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.shotglass.initalize_user_tables">
<code class="sig-prename descclassname">shotglass2.shotglass.</code><code class="sig-name descname">initalize_user_tables</code><span class="sig-paren">(</span><em class="sig-param">db</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.shotglass.initalize_user_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the Users, Prefs and Roles tables</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.shotglass.make_db_path">
<code class="sig-prename descclassname">shotglass2.shotglass.</code><code class="sig-name descname">make_db_path</code><span class="sig-paren">(</span><em class="sig-param">filespec</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.shotglass.make_db_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Test the filespec path and if not found, create the path
but not the file.
Returns True if a new path was created, else False</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.shotglass.register_www">
<code class="sig-prename descclassname">shotglass2.shotglass.</code><code class="sig-name descname">register_www</code><span class="sig-paren">(</span><em class="sig-param">app</em>, <em class="sig-param">subdomain=None</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.shotglass.register_www" title="Permalink to this definition">¶</a></dt>
<dd><p>I did this because I thought I could modify the routes
at startup by modifying the routes var returned from get_default_routes
Turns out flask complains that the routes already exist.
If you really want to make more extensive changes, just copy the www blueprint
into a new project and have your way with it.</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.shotglass.set_template_dirs">
<code class="sig-prename descclassname">shotglass2.shotglass.</code><code class="sig-name descname">set_template_dirs</code><span class="sig-paren">(</span><em class="sig-param">this_app</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.shotglass.set_template_dirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Compile a list of potential paths to search for
template files.</p>
<p>sets the global g.template_list with the search paths and
sets app.jinja_loader which flask will use when searching</p>
<p>Neither g.template_list nor app.jinja_loader will contain paths
to the blueprint template directories. Flask handles that after
the initial search so this works the same way.</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.shotglass.static">
<code class="sig-prename descclassname">shotglass2.shotglass.</code><code class="sig-name descname">static</code><span class="sig-paren">(</span><em class="sig-param">filename</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.shotglass.static" title="Permalink to this definition">¶</a></dt>
<dd><p>This takes full responsibility for loading static content</p>
</dd></dl>

</div>
<div class="section" id="access-control">
<h2>Access Control<a class="headerlink" href="#access-control" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-shotglass2.users.admin">
<span id="access-administration"></span><h3>Access Administration<a class="headerlink" href="#module-shotglass2.users.admin" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="shotglass2.users.admin.Admin">
<em class="property">class </em><code class="sig-prename descclassname">shotglass2.users.admin.</code><code class="sig-name descname">Admin</code><span class="sig-paren">(</span><em class="sig-param">db</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.admin.Admin" title="Permalink to this definition">¶</a></dt>
<dd><p>Register tables to be administered and check a user’s access permissions</p>
<dl>
<dt>Instanciate as:</dt><dd><p>admin = Admin(g.db)</p>
</dd>
<dt>Register an admin table:</dt><dd><p>Admin.register(TableObj,url,[,display_name=None[,minimum_rank_required=None[,roles=None]]])
results in an item being added to self.permissions:
self.permissions = [{table,display_name,url,minimum_rank_required(default = 99999999),roles(default = [])},]</p>
<p>Registering a table again will replace the previous registration for that table.</p>
</dd>
<dt>When assessing permissions test that the specified user (by id or username) has:</dt><dd><p>a role with at least minimum_rank_required
OR
a role (by name) in the list roles</p>
</dd>
</dl>
<dl class="method">
<dt id="shotglass2.users.admin.Admin.has_access">
<code class="sig-name descname">has_access</code><span class="sig-paren">(</span><em class="sig-param">user_name</em>, <em class="sig-param">table=None</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.admin.Admin.has_access" title="Permalink to this definition">¶</a></dt>
<dd><p>Test to see if the user represented by user name has access to ANY admin items
If a table class is specified, only check to see if user has access to that table</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.users.admin.Admin.has_user_table_access">
<code class="sig-name descname">has_user_table_access</code><span class="sig-paren">(</span><em class="sig-param">user_name</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.admin.Admin.has_user_table_access" title="Permalink to this definition">¶</a></dt>
<dd><p>Special function to see if current user has access to the user table
A shortcut I want to use in the menu template</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.users.admin.Admin.register">
<code class="sig-name descname">register</code><span class="sig-paren">(</span><em class="sig-param">table</em>, <em class="sig-param">url</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.admin.Admin.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an item to the admin_list</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-shotglass2.users.views.login">
<span id="user-login"></span><h3>User Login<a class="headerlink" href="#module-shotglass2.users.views.login" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="shotglass2.users.views.login.authenticate_user">
<code class="sig-prename descclassname">shotglass2.users.views.login.</code><code class="sig-name descname">authenticate_user</code><span class="sig-paren">(</span><em class="sig-param">username</em>, <em class="sig-param">password</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.views.login.authenticate_user" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Check username and password in db and return:</dt><dd><p>0 = Authentication Failed
1 = Authentication Succeeded
2 = Need a password for this user
-1 = User Inactive</p>
</dd>
<dt>Optional kwargs:</dt><dd><p>include_inactive = True
login_on_success = True</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="shotglass2.users.views.login.quite_test_fixture">
<code class="sig-prename descclassname">shotglass2.users.views.login.</code><code class="sig-name descname">quite_test_fixture</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.views.login.quite_test_fixture" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple way to test that the silent_login decorator is working</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.users.views.login.recover_password">
<code class="sig-prename descclassname">shotglass2.users.views.login.</code><code class="sig-name descname">recover_password</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.views.login.recover_password" title="Permalink to this definition">¶</a></dt>
<dd><p>Send reset password and send user an email if they forget their password</p>
</dd></dl>

</div>
<div class="section" id="module-shotglass2.users.views.password">
<span id="password-processing"></span><h3>Password Processing<a class="headerlink" href="#module-shotglass2.users.views.password" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="shotglass2.users.views.password.getPasswordHash">
<code class="sig-prename descclassname">shotglass2.users.views.password.</code><code class="sig-name descname">getPasswordHash</code><span class="sig-paren">(</span><em class="sig-param">pw</em>, <em class="sig-param">theSalt=None</em>, <em class="sig-param">timesAround='05'</em>, <em class="sig-param">encoding='utf-8'</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.views.password.getPasswordHash" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string hash of the password or None</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.users.views.password.matchPasswordToHash">
<code class="sig-prename descclassname">shotglass2.users.views.password.</code><code class="sig-name descname">matchPasswordToHash</code><span class="sig-paren">(</span><em class="sig-param">pw</em>, <em class="sig-param">passHash</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.views.password.matchPasswordToHash" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper method to simplify testing a plain text password to a hash.
Returns either True or False</p>
</dd></dl>

</div>
</div>
<div class="section" id="data-storage">
<h2>Data Storage<a class="headerlink" href="#data-storage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="database">
<h3>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>The <strong>Database</strong> Class provides the basic connection to a SQLite3 database.</p>
<p>The <strong>SqliteTable</strong> Class is used to interact with the records in the tables. Database queries using instances of this class generally return
a list of <cite>namedlist</cite> objects or <cite>None</cite> if no records are found.</p>
</div></blockquote>
<span class="target" id="module-shotglass2.takeabeltof.database"></span><dl class="class">
<dt id="shotglass2.takeabeltof.database.Database">
<em class="property">class </em><code class="sig-prename descclassname">shotglass2.takeabeltof.database.</code><code class="sig-name descname">Database</code><span class="sig-paren">(</span><em class="sig-param">filename</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.Database" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle the basic database functions, <cite>filename</cite> is the path to the sqlite3 database file.</p>
<dl class="method">
<dt id="shotglass2.takeabeltof.database.Database.connect">
<code class="sig-name descname">connect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.Database.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a connection to the database</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.takeabeltof.database.Database.cursor">
<code class="sig-name descname">cursor</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.Database.cursor" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a cursor to the current database</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="shotglass2.takeabeltof.database.SqliteTable">
<em class="property">class </em><code class="sig-prename descclassname">shotglass2.takeabeltof.database.</code><code class="sig-name descname">SqliteTable</code><span class="sig-paren">(</span><em class="sig-param">db_connection</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.SqliteTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle some basic interactions with a table</p>
<dl class="method">
<dt id="shotglass2.takeabeltof.database.SqliteTable.commit">
<code class="sig-name descname">commit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.SqliteTable.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience to be able to call commit on the database from a table object</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.takeabeltof.database.SqliteTable.create_table">
<code class="sig-name descname">create_table</code><span class="sig-paren">(</span><em class="sig-param">definition=''</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.SqliteTable.create_table" title="Permalink to this definition">¶</a></dt>
<dd><p>The default table definition script. definition arg is a string of valid SQL</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.takeabeltof.database.SqliteTable.delete">
<code class="sig-name descname">delete</code><span class="sig-paren">(</span><em class="sig-param">id</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.SqliteTable.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a single row with this id.
Return True or False</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.takeabeltof.database.SqliteTable.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param">id</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.SqliteTable.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a single namedlist for the record specified by <cite>id</cite> or None</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.takeabeltof.database.SqliteTable.get_column_names">
<code class="sig-name descname">get_column_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.SqliteTable.get_column_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of column names for the table</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.takeabeltof.database.SqliteTable.init_table">
<code class="sig-name descname">init_table</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.SqliteTable.init_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Base init method. Just create the table</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.takeabeltof.database.SqliteTable.new">
<code class="sig-name descname">new</code><span class="sig-paren">(</span><em class="sig-param">set_defaults=True</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.SqliteTable.new" title="Permalink to this definition">¶</a></dt>
<dd><p>return an ‘empty’ namedlist for the table. Normally set the default values for the table</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.takeabeltof.database.SqliteTable.query">
<code class="sig-name descname">query</code><span class="sig-paren">(</span><em class="sig-param">sql</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.SqliteTable.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a query that may return results from muliple tables
The table instance you call this with is unimportant.
You can call it on an instance of SqliteTable directly.
Always make sure that you don’t have conflicting field names in output.</p>
<p>Returns None or a list</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.takeabeltof.database.SqliteTable.query_one">
<code class="sig-name descname">query_one</code><span class="sig-paren">(</span><em class="sig-param">sql</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.SqliteTable.query_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Single row random query</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.takeabeltof.database.SqliteTable.rows_to_namedlist">
<code class="sig-name descname">rows_to_namedlist</code><span class="sig-paren">(</span><em class="sig-param">row_list</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.SqliteTable.rows_to_namedlist" title="Permalink to this definition">¶</a></dt>
<dd><p>return a list of namedlists based on the list of Row objects provided</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.takeabeltof.database.SqliteTable.save">
<code class="sig-name descname">save</code><span class="sig-paren">(</span><em class="sig-param">row_data</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.SqliteTable.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the data in row_data to the db.
row_data is a named list</p>
<p>If row_data.id == None, insert, else update an existing record</p>
<p>trim_strings=False in kwargs will write to db as received. else strip strings first
commit=True in kwargs will commit the changes else changes are un-committed</p>
<p>The data is re read from the db after save and row_data is updated in place so the calling methods has 
an update version of the data.</p>
<p>return the id value of the effected row</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.takeabeltof.database.SqliteTable.select">
<code class="sig-name descname">select</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.SqliteTable.select" title="Permalink to this definition">¶</a></dt>
<dd><p>perform a basic SELECT query returning a list namedlists for all columns</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.takeabeltof.database.SqliteTable.select_one">
<code class="sig-name descname">select_one</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.SqliteTable.select_one" title="Permalink to this definition">¶</a></dt>
<dd><p>a version of select method that returns a single named list object or None</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.takeabeltof.database.SqliteTable.select_one_raw">
<code class="sig-name descname">select_one_raw</code><span class="sig-paren">(</span><em class="sig-param">sql</em>, <em class="sig-param">params=''</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.SqliteTable.select_one_raw" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a single namedlist for sql select statement</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.takeabeltof.database.SqliteTable.select_raw">
<code class="sig-name descname">select_raw</code><span class="sig-paren">(</span><em class="sig-param">sql</em>, <em class="sig-param">params=''</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.SqliteTable.select_raw" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of named list objects based on the sql text with optional string substitutions</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.takeabeltof.database.SqliteTable.set_defaults">
<code class="sig-name descname">set_defaults</code><span class="sig-paren">(</span><em class="sig-param">row_data</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.SqliteTable.set_defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>When creating a new record, set the defaults for this table</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.takeabeltof.database.SqliteTable.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param">rec</em>, <em class="sig-param">form</em>, <em class="sig-param">save=False</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.database.SqliteTable.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the rec with the matching elements in form
rec is a record namedlist 
form is an InmutableMultiDict or a dictionary object</p>
<p>The id element is never updated. Before calling this method be sure that any elements
in form that have names matching names in rec contain the values you want.</p>
<p>Optionally can save the rec (but not committed) after update</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="tables">
<h3>Tables<a class="headerlink" href="#tables" title="Permalink to this headline">¶</a></h3>
<p>Here are a few tables that define the <a class="reference external" href="#shotglass2.users.models.User">Users</a>,
<a class="reference external" href="#shotglass2.users.models.Pref">Prefs</a> and <a class="reference external" href="#shotglass2.users.models.Role">Roles</a>
that are core to the Shotglass module.</p>
<span class="target" id="module-shotglass2.users.models"></span><dl class="class">
<dt id="shotglass2.users.models.Pref">
<em class="property">class </em><code class="sig-prename descclassname">shotglass2.users.models.</code><code class="sig-name descname">Pref</code><span class="sig-paren">(</span><em class="sig-param">db_connection</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.Pref" title="Permalink to this definition">¶</a></dt>
<dd><p>A table to store some random data in
Prefs can be global or attached to a single user
Prefs can also be set to expire</p>
<dl class="method">
<dt id="shotglass2.users.models.Pref.create_table">
<code class="sig-name descname">create_table</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.Pref.create_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Define and create the table</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.users.models.Pref.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">user_name=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.Pref.get" title="Permalink to this definition">¶</a></dt>
<dd><p>can get by pref name and user_name</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="shotglass2.users.models.Role">
<em class="property">class </em><code class="sig-prename descclassname">shotglass2.users.models.</code><code class="sig-name descname">Role</code><span class="sig-paren">(</span><em class="sig-param">db_connection</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.Role" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle some basic interactions with the role table</p>
<dl class="method">
<dt id="shotglass2.users.models.Role.create_table">
<code class="sig-name descname">create_table</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.Role.create_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Define and create the role tablel</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.users.models.Role.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.Role.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a role with this value</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.users.models.Role.init_table">
<code class="sig-name descname">init_table</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.Role.init_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the table and initialize data</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="shotglass2.users.models.User">
<em class="property">class </em><code class="sig-prename descclassname">shotglass2.users.models.</code><code class="sig-name descname">User</code><span class="sig-paren">(</span><em class="sig-param">db_connection</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.User" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle some basic interactions with the user table</p>
<dl class="method">
<dt id="shotglass2.users.models.User.add_role">
<code class="sig-name descname">add_role</code><span class="sig-paren">(</span><em class="sig-param">user_id</em>, <em class="sig-param">role</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.User.add_role" title="Permalink to this definition">¶</a></dt>
<dd><p>Add roles for the user. role param may be int or str of Role name</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.users.models.User.clear_roles">
<code class="sig-name descname">clear_roles</code><span class="sig-paren">(</span><em class="sig-param">user_id</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.User.clear_roles" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all user_role records from this user</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.users.models.User.create_table">
<code class="sig-name descname">create_table</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.User.create_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Define and create the user tablel</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.users.models.User.delete">
<code class="sig-name descname">delete</code><span class="sig-paren">(</span><em class="sig-param">rec_id</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.User.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a single user record as indicated
‘id’ may be an integer or a string</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.users.models.User.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param">id</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.User.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a single namedlist for the user with this id.
If ‘id’ is a string, try to find the user by username or email using self.get_by_username_or_email
If include_inactive=True is in kwargs the search will include inactive users else they are excluded from 
the result.</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.users.models.User.get_by_username_or_email">
<code class="sig-name descname">get_by_username_or_email</code><span class="sig-paren">(</span><em class="sig-param">nameoremail</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.User.get_by_username_or_email" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a single namedlist obj or none based on the username or email</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.users.models.User.get_roles">
<code class="sig-name descname">get_roles</code><span class="sig-paren">(</span><em class="sig-param">userID</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.User.get_roles" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of the role namedlist objects for the user’s roles</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.users.models.User.get_with_roles">
<code class="sig-name descname">get_with_roles</code><span class="sig-paren">(</span><em class="sig-param">role_list</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.User.get_with_roles" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of users who have one or more of the roles in role_list
Role list may be a list of role id’s or it may be a namedlist of role records</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.users.models.User.init_table">
<code class="sig-name descname">init_table</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.User.init_table" title="Permalink to this definition">¶</a></dt>
<dd><p>add some initial data</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.users.models.User.is_admin">
<code class="sig-name descname">is_admin</code><span class="sig-paren">(</span><em class="sig-param">user</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.User.is_admin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if user (name or id) is an admin</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.users.models.User.max_role_rank">
<code class="sig-name descname">max_role_rank</code><span class="sig-paren">(</span><em class="sig-param">userID</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.User.max_role_rank" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the higest role rank for the user specified</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.users.models.User.select">
<code class="sig-name descname">select</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.User.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Limit selection to active user only unless ‘include_inactive’ is true in kwargs</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.users.models.User.update_last_access">
<code class="sig-name descname">update_last_access</code><span class="sig-paren">(</span><em class="sig-param">user_id</em>, <em class="sig-param">no_commit=False</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.User.update_last_access" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the ‘last_access’ field with the current datetime. Default is for record to be committed</p>
</dd></dl>

<dl class="method">
<dt id="shotglass2.users.models.User.user_has_role">
<code class="sig-name descname">user_has_role</code><span class="sig-paren">(</span><em class="sig-param">user_id</em>, <em class="sig-param">role_names</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.User.user_has_role" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if user has the role role_name else False
role_names may be a string or a list</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="shotglass2.users.models.UserRole">
<em class="property">class </em><code class="sig-prename descclassname">shotglass2.users.models.</code><code class="sig-name descname">UserRole</code><span class="sig-paren">(</span><em class="sig-param">db_connection</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.UserRole" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle some basic interactions with the user_role table</p>
<dl class="method">
<dt id="shotglass2.users.models.UserRole.create_table">
<code class="sig-name descname">create_table</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.UserRole.create_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Define and create the user_role tablel</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="shotglass2.users.models.init_db">
<code class="sig-prename descclassname">shotglass2.users.models.</code><code class="sig-name descname">init_db</code><span class="sig-paren">(</span><em class="sig-param">db</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.models.init_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a intial user record.</p>
</dd></dl>

</div>
</div>
<div class="section" id="views">
<h2>Views<a class="headerlink" href="#views" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-shotglass2.users.views.user">
<span id="user"></span><h3>User<a class="headerlink" href="#module-shotglass2.users.views.user" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="shotglass2.users.views.user.activate">
<code class="sig-prename descclassname">shotglass2.users.views.user.</code><code class="sig-name descname">activate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.views.user.activate" title="Permalink to this definition">¶</a></dt>
<dd><p>Allow administrator to activate a new user</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.users.views.user.admin">
<code class="sig-prename descclassname">shotglass2.users.views.user.</code><code class="sig-name descname">admin</code><span class="sig-paren">(</span><em class="sig-param">id=None</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.views.user.admin" title="Permalink to this definition">¶</a></dt>
<dd><p>Administrator access for the User table records</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.users.views.user.register">
<code class="sig-prename descclassname">shotglass2.users.views.user.</code><code class="sig-name descname">register</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.views.user.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Allow people to sign up thier own accounts on the web site</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.users.views.user.save_table_search">
<code class="sig-prename descclassname">shotglass2.users.views.user.</code><code class="sig-name descname">save_table_search</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.views.user.save_table_search" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the table search string and column to the sesstion</p>
</dd></dl>

<span class="target" id="module-shotglass2.users.utils"></span><p>users.utils
Some utility functions</p>
<dl class="function">
<dt id="shotglass2.users.utils.get_access_token">
<code class="sig-prename descclassname">shotglass2.users.utils.</code><code class="sig-name descname">get_access_token</code><span class="sig-paren">(</span><em class="sig-param">token_length=24</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.utils.get_access_token" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an access token that does not exist in the user table</p>
</dd></dl>

</div>
<div class="section" id="module-shotglass2.users.views.pref">
<span id="pref"></span><h3>Pref<a class="headerlink" href="#module-shotglass2.users.views.pref" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="shotglass2.users.views.pref.get_contact_email">
<code class="sig-prename descclassname">shotglass2.users.views.pref.</code><code class="sig-name descname">get_contact_email</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.users.views.pref.get_contact_email" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a tuple of the contact name and email address or None</p>
</dd></dl>

</div>
</div>
<div class="section" id="utilities">
<h2>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-shotglass2.takeabeltof.utils">
<span id="general-purpose-utilities"></span><h3>General Purpose Utilities<a class="headerlink" href="#module-shotglass2.takeabeltof.utils" title="Permalink to this headline">¶</a></h3>
<p>takeabeltof.utils
Some utility functions</p>
<dl class="function">
<dt id="shotglass2.takeabeltof.utils.cleanRecordID">
<code class="sig-prename descclassname">shotglass2.takeabeltof.utils.</code><code class="sig-name descname">cleanRecordID</code><span class="sig-paren">(</span><em class="sig-param">id</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.utils.cleanRecordID" title="Permalink to this definition">¶</a></dt>
<dd><p>return the integer version of id or else -1</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.utils.formatted_phone_number">
<code class="sig-prename descclassname">shotglass2.takeabeltof.utils.</code><code class="sig-name descname">formatted_phone_number</code><span class="sig-paren">(</span><em class="sig-param">phone</em>, <em class="sig-param">sep='-'</em>, <em class="sig-param">raw=False</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.utils.formatted_phone_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Take what may be a phone number and return a formatted version of it or ‘’ or a tuple of found parts
Taken from: <a class="reference external" href="https://www.diveinto.org/python3/regular-expressions.html">https://www.diveinto.org/python3/regular-expressions.html</a></p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.utils.handle_request_error">
<code class="sig-prename descclassname">shotglass2.takeabeltof.utils.</code><code class="sig-name descname">handle_request_error</code><span class="sig-paren">(</span><em class="sig-param">error=None</em>, <em class="sig-param">request=None</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.utils.handle_request_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Usually used to handle a basic request error such as a db error</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.utils.looksLikeEmailAddress">
<code class="sig-prename descclassname">shotglass2.takeabeltof.utils.</code><code class="sig-name descname">looksLikeEmailAddress</code><span class="sig-paren">(</span><em class="sig-param">email=''</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.utils.looksLikeEmailAddress" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if str email looks like a normal email address else False</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.utils.render_markdown_for">
<code class="sig-prename descclassname">shotglass2.takeabeltof.utils.</code><code class="sig-name descname">render_markdown_for</code><span class="sig-paren">(</span><em class="sig-param">file_name</em>, <em class="sig-param">bp=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.utils.render_markdown_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to find the file to render and then do so
if file_name has a leading slash, it will be treated as an apbolute path
by os.path.join. If that’s not what you were expecting, you need to
remove any leading slashes before calling this function.</p>
<p>(In particular, the shotglass.home.docs route depends on this fact.)</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.utils.send_static_file">
<code class="sig-prename descclassname">shotglass2.takeabeltof.utils.</code><code class="sig-name descname">send_static_file</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.utils.send_static_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Send the file if it exists, else try to send it from the static directory</p>
</dd></dl>

</div>
<div class="section" id="module-shotglass2.takeabeltof.date_utils">
<span id="date-utilities"></span><h3>Date Utilities<a class="headerlink" href="#module-shotglass2.takeabeltof.date_utils" title="Permalink to this headline">¶</a></h3>
<p>Some date utilities</p>
<dl class="function">
<dt id="shotglass2.takeabeltof.date_utils.date_to_string">
<code class="sig-prename descclassname">shotglass2.takeabeltof.date_utils.</code><code class="sig-name descname">date_to_string</code><span class="sig-paren">(</span><em class="sig-param">value</em>, <em class="sig-param">format</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.date_utils.date_to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to return a date string in the format specified
value may be a datetime or a ‘date like’ string</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.date_utils.datetime_as_string">
<code class="sig-prename descclassname">shotglass2.takeabeltof.date_utils.</code><code class="sig-name descname">datetime_as_string</code><span class="sig-paren">(</span><em class="sig-param">the_datetime=None</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.date_utils.datetime_as_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string version of the datetime provided or for now</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.date_utils.getDatetimeFromString">
<code class="sig-prename descclassname">shotglass2.takeabeltof.date_utils.</code><code class="sig-name descname">getDatetimeFromString</code><span class="sig-paren">(</span><em class="sig-param">dateString</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.date_utils.getDatetimeFromString" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to create a datetime object based on the string provided
or else None.
The  datetime object returned is time zone aware</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.date_utils.get_time_zone_setting">
<code class="sig-prename descclassname">shotglass2.takeabeltof.date_utils.</code><code class="sig-name descname">get_time_zone_setting</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.date_utils.get_time_zone_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the TIME_ZONE config setting if it exists else None</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.date_utils.local_datetime_now">
<code class="sig-prename descclassname">shotglass2.takeabeltof.date_utils.</code><code class="sig-name descname">local_datetime_now</code><span class="sig-paren">(</span><em class="sig-param">time_zone=None</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.date_utils.local_datetime_now" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a datetime object for now at the time zone specified.</p>
<p>If tz is None, use the tz name in app.config else use the local time per the server</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.date_utils.make_tz_aware">
<code class="sig-prename descclassname">shotglass2.takeabeltof.date_utils.</code><code class="sig-name descname">make_tz_aware</code><span class="sig-paren">(</span><em class="sig-param">the_datetime</em>, <em class="sig-param">time_zone=None</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.date_utils.make_tz_aware" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the time zone aware version of the datetime 
This function will not convert an aware datetime to a new time zone</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.date_utils.nowString">
<code class="sig-prename descclassname">shotglass2.takeabeltof.date_utils.</code><code class="sig-name descname">nowString</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.date_utils.nowString" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the timestamp string in the normal format</p>
</dd></dl>

</div>
<div class="section" id="module-shotglass2.takeabeltof.jinja_filters">
<span id="jinja2-template-filters"></span><h3>Jinja2 Template Filters<a class="headerlink" href="#module-shotglass2.takeabeltof.jinja_filters" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="shotglass2.takeabeltof.jinja_filters.abbr_date_string">
<code class="sig-prename descclassname">shotglass2.takeabeltof.jinja_filters.</code><code class="sig-name descname">abbr_date_string</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.jinja_filters.abbr_date_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Mon. Mar. 4, 2019</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.jinja_filters.iso_date_string">
<code class="sig-prename descclassname">shotglass2.takeabeltof.jinja_filters.</code><code class="sig-name descname">iso_date_string</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.jinja_filters.iso_date_string" title="Permalink to this definition">¶</a></dt>
<dd><p>YYYY-MM-DD</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.jinja_filters.local_date_and_time_string">
<code class="sig-prename descclassname">shotglass2.takeabeltof.jinja_filters.</code><code class="sig-name descname">local_date_and_time_string</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.jinja_filters.local_date_and_time_string" title="Permalink to this definition">¶</a></dt>
<dd><p>3/1/19 6:33AM</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.jinja_filters.local_date_string">
<code class="sig-prename descclassname">shotglass2.takeabeltof.jinja_filters.</code><code class="sig-name descname">local_date_string</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.jinja_filters.local_date_string" title="Permalink to this definition">¶</a></dt>
<dd><p>3/1/19</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.jinja_filters.local_time_string">
<code class="sig-prename descclassname">shotglass2.takeabeltof.jinja_filters.</code><code class="sig-name descname">local_time_string</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.jinja_filters.local_time_string" title="Permalink to this definition">¶</a></dt>
<dd><p>6:00AM</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.jinja_filters.long_date_string">
<code class="sig-prename descclassname">shotglass2.takeabeltof.jinja_filters.</code><code class="sig-name descname">long_date_string</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.jinja_filters.long_date_string" title="Permalink to this definition">¶</a></dt>
<dd><p>March 3, 2019</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.jinja_filters.render_markdown">
<code class="sig-prename descclassname">shotglass2.takeabeltof.jinja_filters.</code><code class="sig-name descname">render_markdown</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.jinja_filters.render_markdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the text as html</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.jinja_filters.short_abbr_date_string">
<code class="sig-prename descclassname">shotglass2.takeabeltof.jinja_filters.</code><code class="sig-name descname">short_abbr_date_string</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.jinja_filters.short_abbr_date_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Mar. 4</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.jinja_filters.short_date_string">
<code class="sig-prename descclassname">shotglass2.takeabeltof.jinja_filters.</code><code class="sig-name descname">short_date_string</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.jinja_filters.short_date_string" title="Permalink to this definition">¶</a></dt>
<dd><p>mm/dd/yy</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.jinja_filters.short_day_and_date_and_time_string">
<code class="sig-prename descclassname">shotglass2.takeabeltof.jinja_filters.</code><code class="sig-name descname">short_day_and_date_and_time_string</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.jinja_filters.short_day_and_date_and_time_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Mon. 3/4/19 6:00PM</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.jinja_filters.short_day_and_date_string">
<code class="sig-prename descclassname">shotglass2.takeabeltof.jinja_filters.</code><code class="sig-name descname">short_day_and_date_string</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.jinja_filters.short_day_and_date_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Mon. 3/4/19</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.jinja_filters.weblink">
<code class="sig-prename descclassname">shotglass2.takeabeltof.jinja_filters.</code><code class="sig-name descname">weblink</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">safe=True</em>, <em class="sig-param">blank=True</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.jinja_filters.weblink" title="Permalink to this definition">¶</a></dt>
<dd><p>Render a hyperlink for the data provided. Data is assumed to be a web address
Open in new window/tab by default.</p>
<dl class="field-list simple">
<dt class="field-odd">Note</dt>
<dd class="field-odd"><p>5/28/19 - trim the displayed url to end after the tld</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="mailer">
<h3>Mailer<a class="headerlink" href="#mailer" title="Permalink to this headline">¶</a></h3>
<p>The <strong>mailer</strong> module provides email functions.</p>
<span class="target" id="module-shotglass2.takeabeltof.mailer"></span><dl class="function">
<dt id="shotglass2.takeabeltof.mailer.email_admin">
<code class="sig-prename descclassname">shotglass2.takeabeltof.mailer.</code><code class="sig-name descname">email_admin</code><span class="sig-paren">(</span><em class="sig-param">subject=None</em>, <em class="sig-param">message=None</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.mailer.email_admin" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut method to send a quick email to the admin</p>
</dd></dl>

<dl class="function">
<dt id="shotglass2.takeabeltof.mailer.send_message">
<code class="sig-prename descclassname">shotglass2.takeabeltof.mailer.</code><code class="sig-name descname">send_message</code><span class="sig-paren">(</span><em class="sig-param">to_address_list=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#shotglass2.takeabeltof.mailer.send_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Send an email with the parameters as:
to_address_list=[list of tuples (recipient name,recipient address)]=None</p>
<p>If the to_address_list is not provided, mail will be sent to the admin</p>
<dl class="simple">
<dt>kwargs:</dt><dd><ul class="simple">
<li><p>body  = &lt;text for body of email&gt; = None</p></li>
<li><p>body_is_html  = &lt;True | False&gt; = False</p></li>
<li><p>text_template =&lt;template to render as plain text message&gt; = None</p></li>
<li><p>html_template =&lt;template to render as html message&gt; = None</p></li>
<li><p>subject =&lt;subject text (will be rendered with the current context&gt;)&gt;= a default subject</p></li>
<li><p>subject_prefix =&lt;some text to prepend to the subject = ‘’</p></li>
<li><p>from_address =&lt;from address&gt; = sit_config[‘MAIL_DEFAULT_ADDR’]</p></li>
<li><p>from_sender =&lt;name of sender&gt; = site_config[‘MAIL_DEFAULT_SENDER’]</p></li>
<li><p>reply_to_address =&lt;replyto address&gt; = from_address</p></li>
<li><p>reply_to_name =&lt;name of reply to account&gt; = from_sender</p></li>
<li><p>cc = address list for carbon copy addresses</p></li>
<li><p>bcc  = address list for blind carbon copy addresses</p></li>
<li><p>attachment  = &lt; a tuple of data as (“image.png”, “image/png”, ‘data to attach’) &gt; = None</p></li>
<li><p>attachments  = [&lt;list of attachment tuples&gt;] = None</p></li>
</ul>
</dd>
<dt>On completion returns a tuple of:</dt><dd><p>( success [<cite>True</cite> or <cite>False</cite>], message &lt;”some message”&gt;)</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Staffing</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Help for Admins:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin/index.html">Managing the Site</a></li>
</ul>
<p class="caption"><span class="caption-text">Help for Developers:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Technical Documentation</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Technical Documentation</a><ul>
      <li>Previous: <a href="staffing.html" title="previous chapter">Staffing Module</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Bill Leddy.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/dev/shotglass2.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>